<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Telling Stories with Data - 2&nbsp; Drinking from a fire hose</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./03-r_essentials.html" rel="next">
<link href="./01-introduction.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Drinking from a fire hose</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Telling Stories with Data</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/RohanAlexander/telling_stories/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-author.html" class="sidebar-item-text sidebar-link">About the author</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Foundations</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-introduction.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Telling stories with data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-drinking_from_a_fire_hose.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Drinking from a fire hose</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-r_essentials.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R essentials</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-workflow.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Reproducible workflows</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Communication</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-writing_research.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Writing research</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-static_communication.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Static communication</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-interactive_communication.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Interactive communication</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Acquisition</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-farm.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Farm data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-gather.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Gather data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-hunt.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Hunt data</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">Preparation</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-clean_and_prepare.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Clean and prepare</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-store_and_share.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Store and share</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">Modelling</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-eda.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Exploratory data analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-ijalm.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Linear models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-causality_from_obs.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Causality from observational data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-mrp.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Multilevel regression with post-stratification</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-text.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Text as data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./18-concluding.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Concluding remarks</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">Appendices</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-datasets.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Datasets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-rmarkdown.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">R Markdown</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-assessment.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Papers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-datasheet.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Datasheet</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./98-cocktails.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Cocktails</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99-references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#hello-world" id="toc-hello-world" class="nav-link active" data-scroll-target="#hello-world"> <span class="header-section-number">2.1</span> Hello, World!</a></li>
  <li><a href="#australian-elections" id="toc-australian-elections" class="nav-link" data-scroll-target="#australian-elections"> <span class="header-section-number">2.2</span> Australian elections</a>
  <ul class="collapse">
  <li><a href="#plan" id="toc-plan" class="nav-link" data-scroll-target="#plan"> <span class="header-section-number">2.2.1</span> Plan</a></li>
  <li><a href="#simulate" id="toc-simulate" class="nav-link" data-scroll-target="#simulate"> <span class="header-section-number">2.2.2</span> Simulate</a></li>
  <li><a href="#acquire" id="toc-acquire" class="nav-link" data-scroll-target="#acquire"> <span class="header-section-number">2.2.3</span> Acquire</a></li>
  <li><a href="#explore" id="toc-explore" class="nav-link" data-scroll-target="#explore"> <span class="header-section-number">2.2.4</span> Explore</a></li>
  <li><a href="#communicate" id="toc-communicate" class="nav-link" data-scroll-target="#communicate"> <span class="header-section-number">2.2.5</span> Communicate</a></li>
  </ul></li>
  <li><a href="#toronto-homelessness" id="toc-toronto-homelessness" class="nav-link" data-scroll-target="#toronto-homelessness"> <span class="header-section-number">2.3</span> Toronto homelessness</a>
  <ul class="collapse">
  <li><a href="#plan-1" id="toc-plan-1" class="nav-link" data-scroll-target="#plan-1"> <span class="header-section-number">2.3.1</span> Plan</a></li>
  <li><a href="#simulate-1" id="toc-simulate-1" class="nav-link" data-scroll-target="#simulate-1"> <span class="header-section-number">2.3.2</span> Simulate</a></li>
  <li><a href="#acquire-1" id="toc-acquire-1" class="nav-link" data-scroll-target="#acquire-1"> <span class="header-section-number">2.3.3</span> Acquire</a></li>
  <li><a href="#explore-1" id="toc-explore-1" class="nav-link" data-scroll-target="#explore-1"> <span class="header-section-number">2.3.4</span> Explore</a></li>
  <li><a href="#communicate-1" id="toc-communicate-1" class="nav-link" data-scroll-target="#communicate-1"> <span class="header-section-number">2.3.5</span> Communicate</a></li>
  </ul></li>
  <li><a href="#neonatal-mortality" id="toc-neonatal-mortality" class="nav-link" data-scroll-target="#neonatal-mortality"> <span class="header-section-number">2.4</span> Neonatal mortality</a>
  <ul class="collapse">
  <li><a href="#plan-2" id="toc-plan-2" class="nav-link" data-scroll-target="#plan-2"> <span class="header-section-number">2.4.1</span> Plan</a></li>
  <li><a href="#simulate-2" id="toc-simulate-2" class="nav-link" data-scroll-target="#simulate-2"> <span class="header-section-number">2.4.2</span> Simulate</a></li>
  <li><a href="#acquire-2" id="toc-acquire-2" class="nav-link" data-scroll-target="#acquire-2"> <span class="header-section-number">2.4.3</span> Acquire</a></li>
  <li><a href="#explore-2" id="toc-explore-2" class="nav-link" data-scroll-target="#explore-2"> <span class="header-section-number">2.4.4</span> Explore</a></li>
  <li><a href="#communicate-2" id="toc-communicate-2" class="nav-link" data-scroll-target="#communicate-2"> <span class="header-section-number">2.4.5</span> Communicate</a></li>
  </ul></li>
  <li><a href="#concluding-remarks" id="toc-concluding-remarks" class="nav-link" data-scroll-target="#concluding-remarks"> <span class="header-section-number">2.5</span> Concluding remarks</a></li>
  <li><a href="#exercises-and-tutorial" id="toc-exercises-and-tutorial" class="nav-link" data-scroll-target="#exercises-and-tutorial"> <span class="header-section-number">2.6</span> Exercises and tutorial</a>
  <ul class="collapse">
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a></li>
  <li><a href="#tutorial" id="toc-tutorial" class="nav-link" data-scroll-target="#tutorial">Tutorial</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/RohanAlexander/telling_stories/edit/main/02-drinking_from_a_fire_hose.qmd" class="toc-action">Edit this page</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-fire-hose" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Drinking from a fire hose</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p><strong>Required material</strong></p>
<ul>
<li>Read <em>Data science as an atomic habit</em>, <span class="citation" data-cites="citeBarrett">(<a href="99-references.html#ref-citeBarrett" role="doc-biblioref">Barrett 2021</a>)</span></li>
<li>Read <em>This is how AI bias really happens—and why it’s so hard to fix</em>, <span class="citation" data-cites="hao2019">(<a href="99-references.html#ref-hao2019" role="doc-biblioref">Hao 2019</a>)</span></li>
<li>Read <em>The mundanity of excellence: An ethnographic report on stratification and Olympic swimmers</em>, <span class="citation" data-cites="chambliss1989mundanity">(<a href="99-references.html#ref-chambliss1989mundanity" role="doc-biblioref">Chambliss 1989</a>)</span></li>
</ul>
<p><strong>Key concepts and skills</strong></p>
<ul>
<li>The statistical programming language R enables us to tell interesting stories using data. It is a language like any other, and the path to mastery can be slow.</li>
<li>The framework that we use to approach projects is: plan, simulate, gather, explore, and share.</li>
<li>The way to learn R is to start with a small project and break down what is required to achieve it into tiny steps, look at other people’s code, and draw on that to achieve each step. Complete that project and move onto the next project. Each project you will get a little better.</li>
<li>The key is to start actively working regularly.</li>
</ul>
<p><strong>Key packages and functions</strong></p>
<ul>
<li>Base R
<ul>
<li><code>&lt;-</code> “assign”</li>
<li><code>|&gt;</code> “pipe”</li>
<li><code>+</code> “add”</li>
<li><code>c()</code></li>
<li><code>citation()</code></li>
<li><code>class()</code></li>
<li><code>head()</code></li>
<li><code>library()</code></li>
<li><code>names()</code></li>
<li><code>rep()</code></li>
<li><code>rpois()</code></li>
<li><code>runif()</code></li>
<li><code>sample()</code></li>
<li><code>set.seed()</code></li>
<li><code>sum()</code></li>
<li><code>tail()</code></li>
</ul></li>
<li>Core <code>tidyverse</code> <span class="citation" data-cites="tidyverse">(<a href="99-references.html#ref-tidyverse" role="doc-biblioref">Wickham et al. 2019</a>)</span>
<ul>
<li><code>dplyr</code> <span class="citation" data-cites="citedplyr">(<a href="99-references.html#ref-citedplyr" role="doc-biblioref">Wickham et al. 2022</a>)</span>
<ul>
<li><code>arrange()</code></li>
<li><code>filter()</code></li>
<li><code>mutate()</code></li>
<li><code>recode()</code></li>
<li><code>rename()</code></li>
<li><code>select()</code></li>
<li><code>summarize()</code></li>
</ul></li>
<li><code>ggplot2</code> <span class="citation" data-cites="citeggplot">(<a href="99-references.html#ref-citeggplot" role="doc-biblioref">Wickham 2016</a>)</span>
<ul>
<li><code>geom_bar()</code></li>
<li><code>geom_point()</code></li>
<li><code>ggplot()</code></li>
</ul></li>
<li><code>tidyr</code> <span class="citation" data-cites="citetidyr">(<a href="99-references.html#ref-citetidyr" role="doc-biblioref">Wickham 2021</a>)</span>
<ul>
<li><code>separate()</code></li>
</ul></li>
<li><code>stringr</code> <span class="citation" data-cites="citestringr">(<a href="99-references.html#ref-citestringr" role="doc-biblioref">Wickham 2019</a>)</span>
<ul>
<li><code>str_remove()</code></li>
</ul></li>
<li><code>readr</code> <span class="citation" data-cites="citereadr">(<a href="99-references.html#ref-citereadr" role="doc-biblioref">Wickham, Hester, and Bryan 2021</a>)</span>
<ul>
<li><code>read_csv()</code></li>
<li><code>write_csv()</code></li>
</ul></li>
</ul></li>
<li><code>janitor</code> <span class="citation" data-cites="janitor">(<a href="99-references.html#ref-janitor" role="doc-biblioref">Firke 2020</a>)</span>
<ul>
<li><code>clean_names()</code></li>
</ul></li>
<li><code>opendatatoronto</code> <span class="citation" data-cites="citeSharla">(<a href="99-references.html#ref-citeSharla" role="doc-biblioref">Gelfand 2020</a>)</span>
<ul>
<li><code>list_package_resources()</code></li>
<li><code>get_resource()</code></li>
</ul></li>
</ul>
<section id="hello-world" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="hello-world"><span class="header-section-number">2.1</span> Hello, World!</h2>
<p>The way to start, is to start. In this chapter we go through three complete examples of the data science workflow advocated in this book. This means we will: plan, simulate, acquire, explore, and share. If you are new to R, then some of the code may be a bit unfamiliar to you. If you are new to statistics, then some of the concepts may be unfamiliar. Do not worry. It will all soon become familiar.</p>
<p>The only way to learn how to tell stories, is to start telling stories yourself. This means that you should try to get these examples working. Do the sketches yourself, type everything out yourself (using RStudio Cloud if you are new to R and do not have it locally installed), and execute it all. It is important to realize that it will be challenging at the start. This is normal.</p>
<blockquote class="blockquote">
<p>Whenever you’re learning a new tool, for a long time, you’re going to suck… But the good news is that is typical; that’s something that happens to everyone, and it’s only temporary.</p>
<p>Hadley Wickham as quoted by <span class="citation" data-cites="citeBarrett">Barrett (<a href="99-references.html#ref-citeBarrett" role="doc-biblioref">2021</a>)</span>.</p>
</blockquote>
<p>You will be guided thoroughly here. Hopefully by experiencing the excitement of telling stories with data, you will feel empowered to stick with it.</p>
<p>To get started, go to <a href="https://rstudio.cloud/">RStudio Cloud</a> and create an account. As we are not doing anything too involved the free version will be fine for now. We use it here rather than the desktop so that getting started is the same for everyone, but we will shift to a local installation later. Once you have an account and log in, it should look something like <a href="#fig-02-rstudio_cloud-1">Figure&nbsp;<span>2.1 (a)</span></a>.</p>
<div id="fig-openrstudio" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-bottom">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-02-rstudio_cloud-1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/02-rstudio_cloud-1.png" class="img-fluid figure-img" data-ref-parent="fig-openrstudio"></p>
<p></p><figcaption class="figure-caption">(a) Opening RStudio Cloud for the first time</figcaption><p></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-02-rstudio_cloud-2" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/02-rstudio_cloud-2.png" class="img-fluid figure-img" data-ref-parent="fig-openrstudio"></p>
<p></p><figcaption class="figure-caption">(b) Opening a new RStudio project</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure 2.1: Getting started with RStudio Cloud and a new project</figcaption><p></p>
</figure>
</div>
<p>You will be in “Your Projects”. From here you should start a new project (“New Project” -&gt; “New RStudio Project”) (<a href="#fig-02-rstudio_cloud-2">Figure&nbsp;<span>2.1 (b)</span></a>). You can give the project a name by clicking on “Untitled Project” and replacing it .</p>
<p>We will now go through three worked examples: Australian elections, Toronto homelessness, and neonatal mortality. These examples build increasing complexity, but from the first one, we will be telling a story with data. Finally, while we briefly explain many aspect here, almost everything is explained in much more detail in the rest of the book.</p>
</section>
<section id="australian-elections" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="australian-elections"><span class="header-section-number">2.2</span> Australian elections</h2>
<p>Australia is a parliamentary democracy with 151 seats in the House of Representatives, which is the lower house and that from which government is formed. There are two major parties—“Liberal” and “Labor”—two minor parties—“Nationals” and “Greens”—and many smaller parties and independents. In this example we will create a graph of the number of seats that each party won in the 2022 Federal Election.</p>
<section id="plan" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="plan"><span class="header-section-number">2.2.1</span> Plan</h3>
<p>For this example, we need to plan two aspects. The first is what the dataset that we need will look like, and the second is what the final graph will look like.</p>
<p>The basic requirement for the dataset is that it has the name of the seat (sometimes called a “division” in Australia) and the party of the person elected. So, a quick sketch of the dataset that we would need could look something like <a href="#fig-australiaexample-data">Figure&nbsp;<span>2.2 (a)</span></a>.</p>
<div id="fig-australiaexample" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-bottom">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-australiaexample-data" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/number-of-seats.png" class="img-fluid figure-img" data-ref-parent="fig-australiaexample"></p>
<p></p><figcaption class="figure-caption">(a) Quick sketch of a dataset that could be useful for analyzing Australian elections</figcaption><p></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-australiaexample-graph" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/possible-seats.png" class="img-fluid figure-img" data-ref-parent="fig-australiaexample"></p>
<p></p><figcaption class="figure-caption">(b) Quick sketch of a possible graph of the number of seats won by each party</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure 2.2: Sketches of a dataset and graph related to the Australian election</figcaption><p></p>
</figure>
</div>
<p>We also need to plan the graph that we are interested in. Given we want to display the number of seats that each party won, a quick sketch of what we might aim for is <a href="#fig-australiaexample-graph">Figure&nbsp;<span>2.2 (b)</span></a>.</p>
</section>
<section id="simulate" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="simulate"><span class="header-section-number">2.2.2</span> Simulate</h3>
<p>We now simulate some data, to bring some specificity to our sketches.</p>
<p>To get started, within RStudio Cloud, make a new Quarto document (“File” -&gt; “New File” -&gt; “Quarto Document…”). Give it a title, such as “Exploring the 2022 Australian Election”, and add your name as author. Leave the other options as their default, and then click “Create”. For this example, we will put everything into this one Quarto document. You should save it as “australian_elections.qmd” (“File” -&gt; “Save As…”).</p>
<p>Remove almost all the default content, and then beneath the heading material create a new R code chunk (“Code” -&gt; “Insert Chunk”) and add preamble documentation that explains:</p>
<ul>
<li>the purpose of the document;</li>
<li>the author and contact details;</li>
<li>when the file was written or last updated; and</li>
<li>pre-requisites that the file relies on.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Preamble ####</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Purpose: Read in data from the 2022 Australian Election and make a</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># graph of the number of seats each party won.</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Author: Rohan Alexander</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Email: rohan.alexander@utoronto.ca</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Date: 1 July 2022</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Prerequisites: Need to know where to get Australian elections data.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In R, lines that start with “#” are comments. This means that they are not run as code by R, but are instead designed to be read by humans. Each line of this preamble should start with a “#”. Also make it clear that this is the preamble section by surrounding that with “####”. The result should look like <a href="#fig-quarto-australian-elections-3">Figure&nbsp;<span>2.3</span></a>.</p>
<div id="fig-quarto-australian-elections-3" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/02-rstudio_cloud-3.png" class="img-fluid figure-img" style="width:75.0%"></p>
<p></p><figcaption class="figure-caption">Figure 2.3: Screenshot of australian_elections.qmd after initial set-up and with a premable</figcaption><p></p>
</figure>
</div>
<p>After this we need to set-up the workspace. This involves installing and loading any packages that will be needed. A package only needs to be installed once for each computer, but needs to be loaded each time it is to be used. In this case we are going to use the <code>tidyverse</code> <span class="citation" data-cites="Wickham2017">(<a href="99-references.html#ref-Wickham2017" role="doc-biblioref">Wickham 2017</a>)</span>, and <code>janitor</code> <span class="citation" data-cites="janitor">(<a href="99-references.html#ref-janitor" role="doc-biblioref">Firke 2020</a>)</span>. They will need to be installed because this is the first time they are being used, and then each will need to be loaded.</p>
<p>An example of installing the packages follows (excessive comments have been added to be clear about what is going on; in general, this level of commenting is unnecessary). Run this code by clicking the small green arrow associated with the R code chunk (<a href="#fig-quarto-australian-elections-4">Figure&nbsp;<span>2.4</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Workspace set-up ####</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>) <span class="co"># Only need to do this once per computer</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"janitor"</span>) <span class="co"># Only need to do this once per computer</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"httr"</span>) <span class="co"># Only need to do this once per computer</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="fig-quarto-australian-elections-4" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/02-rstudio_cloud-4.png" class="img-fluid figure-img" style="width:75.0%"></p>
<p></p><figcaption class="figure-caption">Figure 2.4: Screenshot of australian_elections.qmd highlighting the green arrow to run the chunk</figcaption><p></p>
</figure>
</div>
<p>Now that the packages are installed, they need to be loaded. As that installation step only needs to be done once per computer, that code can be commented out so that it is not accidentally run.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Workspace set-up ####</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("tidyverse") # Only need to do this once per computer</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("janitor") # Only need to do this once per computer</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># A collection of data-related packages</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor) <span class="co"># Helps clean datasets</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr) <span class="co"># Tools for working with URLs</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can render the entire document by clicking “Render”. When you do this, you may be asked to install some packages. If that happens, then you should agree to this. This will result in a HTML document.</p>
<p>For an introduction to the packages that were just installed, each package contains a help file that provides information about them and their functions. It can be accessed by prepending a question mark to the package name and then running that code in the console. For instance <code>?tidyverse</code>.</p>
<p>To simulate our data, we need to create a dataset with two columns: “Division” and “party”, and some values for each. In the case of “Division” reasonable values would be a name of one of the 151 Australian divisions. In the case of “party” reasonable values would be one of the following five: “Liberal”, “Labor”, “National”, “Green”, “Other”. Again, this code can be run by clicking the small green arrow associated with the R code chunk.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>simulated_data <span class="ot">&lt;-</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use 1 through to 151 to represent each division</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Division"</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">151</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Randomly pick one of five options, with replacement, 151 times</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Party"</span> <span class="ot">=</span> <span class="fu">sample</span>(</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">c</span>(</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Liberal"</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Labor"</span>,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"National"</span>,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Green"</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Other"</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">151</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">replace =</span> <span class="cn">TRUE</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>simulated_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 151 × 2
   Division Party   
      &lt;int&gt; &lt;chr&gt;   
 1        1 Other   
 2        2 National
 3        3 Green   
 4        4 Labor   
 5        5 Green   
 6        6 National
 7        7 Liberal 
 8        8 Green   
 9        9 Green   
10       10 Other   
# … with 141 more rows
# ℹ Use `print(n = ...)` to see more rows</code></pre>
</div>
</div>
<p>At a certain point, your code will not run and you will want to ask others for help. Do not take a screenshot of a small snippet of the code and expect that someone will be able to help based on that. They, almost surely, cannot. Instead, you need to provide them with your whole script in a way that they can run. We will explain what GitHub is more completely in <a href="04-workflow.html"><span>Chapter&nbsp;4</span></a>, but for now, if you need help, then you should blindly create a GitHub Gist which will enable you to share your code in a way that is more helpful than taking a screenshot. The first step is to create an account on <a href="https://github.com">GitHub</a> (<a href="#fig-githubone">Figure&nbsp;<span>2.5 (a)</span></a>). Thinking about an appropriate username is important because this will become part of your professional profile. So it would make sense to have a username that is professional, independent of any course, and ideally related to your real name. Then look for a “+” in the top right, and then select “New gist” (<a href="#fig-githubgistone">Figure&nbsp;<span>2.5 (b)</span></a>).</p>
<div id="fig-githubgist" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-bottom">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-githubone" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/github_1.png" class="img-fluid figure-img" data-ref-parent="fig-githubgist"></p>
<p></p><figcaption class="figure-caption">(a) GitHub sign-up screen</figcaption><p></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-githubgistone" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/githubgistone.png" class="img-fluid figure-img" data-ref-parent="fig-githubgist"></p>
<p></p><figcaption class="figure-caption">(b) New GitHub Gist</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-bottom">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-githubgisttwo" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/githubgisttwo.png" class="img-fluid figure-img" data-ref-parent="fig-githubgist"></p>
<p></p><figcaption class="figure-caption">(c) Create a public GitHub Gist to share code</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure 2.5: Creating a Gist to share code when asking for help</figcaption><p></p>
</figure>
</div>
<p>From here you should add all of the code to that gist, not just the final bit that is giving an error. And give it a meaningful filename that includes “.R” at the end, for instance, “australian_elections.R”. In <a href="#fig-githubgisttwo">Figure&nbsp;<span>2.5 (c)</span></a> it will turn out that we have incorrect capitalization, <code>library(Tidyverse)</code> instead of <code>library(tidyverse)</code>.</p>
<p>Click “Create public gist”. We can then share the URL to this Gist with whoever we are asking to help, explain what the problem is, and what we are trying to achieve. It will be much easier to help, because all the code is available.</p>
</section>
<section id="acquire" class="level3" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="acquire"><span class="header-section-number">2.2.3</span> Acquire</h3>
<p>Now we want to get the actual data. The data we need is from the Australian Electoral Commission (AEC), which is the non-partisan agency that organizes Australian federal elections. We can pass a page of their website to <code>read_csv()</code> from <code>readr</code> <span class="citation" data-cites="citereadr">(<a href="99-references.html#ref-citereadr" role="doc-biblioref">Wickham, Hester, and Bryan 2021</a>)</span>. We do not need to explicitly load <code>readr</code> because it is part of the <code>tidyverse</code>. The <code>&lt;-</code> or “assignment operator” is allocating the output of <code>read_csv()</code> to an object called “raw_elections_data”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Read in the data ####</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>raw_elections_data <span class="ot">&lt;-</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">file =</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"https://results.aec.gov.au/27966/website/Downloads/HouseMembersElectedDownload-27966.csv"</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">skip =</span> <span class="dv">1</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co"># We have read the data from the AEC website. We may like to save</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># it in case something happens or they move it.</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> raw_elections_data,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"australian_voting.csv"</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">

</div>
<div class="cell">

</div>
<p>We can take a quick look at the dataset using <code>head()</code> which will show the first six rows, and <code>tail()</code> which will show the last six rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(raw_elections_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  DivisionID DivisionNm StateAb CandidateID GivenNm   Surname   PartyNm  PartyAb
       &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;  
1        179 Adelaide   SA            36973 Steve     GEORGANAS Austral… ALP    
2        197 Aston      VIC           36704 Alan      TUDGE     Liberal  LP     
3        198 Ballarat   VIC           36409 Catherine KING      Austral… ALP    
4        103 Banks      NSW           37018 David     COLEMAN   Liberal  LP     
5        180 Barker     SA            37083 Tony      PASIN     Liberal  LP     
6        104 Barton     NSW           36820 Linda     BURNEY    Austral… ALP    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(raw_elections_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  DivisionID DivisionNm StateAb CandidateID GivenNm    Surname  PartyNm  PartyAb
       &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;  
1        152 Wentworth  NSW           37451 Allegra    SPENDER  Indepen… IND    
2        153 Werriwa    NSW           36810 Anne Maree STANLEY  Austral… ALP    
3        150 Whitlam    NSW           36811 Stephen    JONES    Austral… ALP    
4        178 Wide Bay   QLD           37506 Llew       O'BRIEN  Liberal… LNP    
5        234 Wills      VIC           36452 Peter      KHALIL   Austral… ALP    
6        316 Wright     QLD           37500 Scott      BUCHHOLZ Liberal… LNP    </code></pre>
</div>
</div>
<p>We need to clean the data so that we can use it. We are trying to make it similar to the dataset that we thought we wanted in the planning stage. While it is fine to move away from the plan, this needs to be a deliberate, reasoned, decision. After reading in the dataset that we saved, the first thing that we will do is adjust the names to make them easier to type. Removing the spaces helps to type column names. We will do this using <code>clean_names()</code> from <code>janitor</code> <span class="citation" data-cites="janitor">(<a href="99-references.html#ref-janitor" role="doc-biblioref">Firke 2020</a>)</span> which changes the names into “snake_case”.</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Basic cleaning ####</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>raw_elections_data <span class="ot">&lt;-</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">file =</span> <span class="st">"australian_voting.csv"</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make the names easier to type</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>cleaned_elections_data <span class="ot">&lt;-</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>(raw_elections_data)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at the first six rows</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cleaned_elections_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  division_id division_nm state_ab candidate_id given_nm surname party…¹ party…²
        &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
1         179 Adelaide    SA              36973 Steve    GEORGA… Austra… ALP    
2         197 Aston       VIC             36704 Alan     TUDGE   Liberal LP     
3         198 Ballarat    VIC             36409 Catheri… KING    Austra… ALP    
4         103 Banks       NSW             37018 David    COLEMAN Liberal LP     
5         180 Barker      SA              37083 Tony     PASIN   Liberal LP     
6         104 Barton      NSW             36820 Linda    BURNEY  Austra… ALP    
# … with abbreviated variable names ¹​party_nm, ²​party_ab</code></pre>
</div>
</div>
<p>The names are faster to type because RStudio will auto-complete them. To do this, we begin typing the name of a column and then use “tab” to complete it.</p>
<p>There are many columns in the dataset, and we are primarily interested in two: “division_nm”, and “party_nm”. We can choose certain columns of interest with <code>select()</code> from <code>dplyr</code> <span class="citation" data-cites="citedplyr">(<a href="99-references.html#ref-citedplyr" role="doc-biblioref">Wickham et al. 2022</a>)</span> which we loaded as part of the <code>tidyverse</code>. The “pipe operator”, <code>|&gt;</code>, pushes the output of one line to be the first input of the function on the next line.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>cleaned_elections_data <span class="ot">&lt;-</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  cleaned_elections_data <span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select only certain columns</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    division_nm,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    party_nm</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Have a look at the first six rows</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cleaned_elections_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  division_nm party_nm              
  &lt;chr&gt;       &lt;chr&gt;                 
1 Adelaide    Australian Labor Party
2 Aston       Liberal               
3 Ballarat    Australian Labor Party
4 Banks       Liberal               
5 Barker      Liberal               
6 Barton      Australian Labor Party</code></pre>
</div>
</div>
<p>Some of the names of the columns are still not obvious because they are abbreviated. We can look at the names of the columns in this dataset with <code>names()</code>. And we can change the names using <code>rename()</code> from <code>dplyr</code> <span class="citation" data-cites="citedplyr">(<a href="99-references.html#ref-citedplyr" role="doc-biblioref">Wickham et al. 2022</a>)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(cleaned_elections_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "division_nm" "party_nm"   </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>cleaned_elections_data <span class="ot">&lt;-</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  cleaned_elections_data <span class="sc">|&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">division =</span> division_nm,</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">elected_party =</span> party_nm</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cleaned_elections_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  division elected_party         
  &lt;chr&gt;    &lt;chr&gt;                 
1 Adelaide Australian Labor Party
2 Aston    Liberal               
3 Ballarat Australian Labor Party
4 Banks    Liberal               
5 Barker   Liberal               
6 Barton   Australian Labor Party</code></pre>
</div>
</div>
<p>We could now look at the unique values in the “elected_party” column using <code>unique()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>cleaned_elections_data<span class="sc">$</span>elected_party <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Australian Labor Party"              
[2] "Liberal"                             
[3] "Liberal National Party of Queensland"
[4] "The Greens"                          
[5] "The Nationals"                       
[6] "Independent"                         
[7] "Katter's Australian Party (KAP)"     
[8] "Centre Alliance"                     </code></pre>
</div>
</div>
<!-- We can see that we have the surname of the elected candidate, followed by a comma, followed by their first name, followed by a space, followed by the name of the party in both English and French, separated by a slash. We can break-up this column into its pieces using `separate()` from `tidyr` [@citetidyr]. -->
<!-- ```{r} -->
<!-- cleaned_elections_data <-  -->
<!--   cleaned_elections_data |>  -->
<!--   # Separate the column into two based on the slash -->
<!--   separate(col = elected_candidate, -->
<!--            into = c("Other", "party"), -->
<!--            sep = "/") |>  -->
<!--   # Remove the "Other" column -->
<!--   select(-other) -->
<!-- head(cleaned_elections_data) -->
<!-- ``` -->
<p>As there is more detail in this than we wanted, we may want to simplify the party names to match what we simulated, using <code>recode()</code> from <code>dplyr</code> <span class="citation" data-cites="citedplyr">(<a href="99-references.html#ref-citedplyr" role="doc-biblioref">Wickham et al. 2022</a>)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>cleaned_elections_data <span class="ot">&lt;-</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  cleaned_elections_data <span class="sc">|&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">elected_party =</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">recode</span>(</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>        elected_party,</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Australian Labor Party"</span> <span class="ot">=</span> <span class="st">"Labor"</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Liberal National Party of Queensland"</span> <span class="ot">=</span> <span class="st">"Liberal"</span>,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"The Nationals"</span> <span class="ot">=</span> <span class="st">"Nationals"</span>,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"The Greens"</span> <span class="ot">=</span> <span class="st">"Greens"</span>,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Independent"</span> <span class="ot">=</span> <span class="st">"Other"</span>,</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Katter's Australian Party (KAP)"</span> <span class="ot">=</span> <span class="st">"Other"</span>,</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Centre Alliance"</span> <span class="ot">=</span> <span class="st">"Other"</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cleaned_elections_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  division elected_party
  &lt;chr&gt;    &lt;chr&gt;        
1 Adelaide Labor        
2 Aston    Liberal      
3 Ballarat Labor        
4 Banks    Liberal      
5 Barker   Liberal      
6 Barton   Labor        </code></pre>
</div>
</div>
<p>Our data now matches our plan (<a href="#fig-australiaexample-data">Figure&nbsp;<span>2.2 (a)</span></a>) pretty well. For every electoral division we have the party of the person that won it.</p>
<p>Having now nicely cleaned the dataset, we should save it, so that we can start with that cleaned dataset in the next stage. We should make sure to save it under a new file name so we are not replacing the raw data, and so that it is easy to identify the cleaned dataset later.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> cleaned_elections_data,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"cleaned_elections_data.csv"</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">

</div>
</section>
<section id="explore" class="level3" data-number="2.2.4">
<h3 data-number="2.2.4" class="anchored" data-anchor-id="explore"><span class="header-section-number">2.2.4</span> Explore</h3>
<p>We may now like to explore the dataset that we created. One way to better understand a dataset is to make a graph. In particular, here we would like to build the graph that we planned in <a href="#fig-australiaexample-graph">Figure&nbsp;<span>2.2 (b)</span></a>.</p>
<p>First, we read in the dataset that we just created.</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Read in the data ####</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>cleaned_elections_data <span class="ot">&lt;-</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">file =</span> <span class="st">"cleaned_elections_data.csv"</span>,</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can get a quick count of how many seats each party won using <code>count()</code> from <code>dplyr</code> <span class="citation" data-cites="citedplyr">(<a href="99-references.html#ref-citedplyr" role="doc-biblioref">Wickham et al. 2022</a>)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>cleaned_elections_data <span class="sc">|&gt;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(elected_party)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  elected_party     n
  &lt;chr&gt;         &lt;int&gt;
1 Greens            4
2 Labor            77
3 Liberal          48
4 Nationals        10
5 Other            12</code></pre>
</div>
</div>
<p>To build the graph that we are interested in, we use <code>ggplot2</code> <span class="citation" data-cites="citeggplot">(<a href="99-references.html#ref-citeggplot" role="doc-biblioref">Wickham 2016</a>)</span> which is part of the <code>tidyverse</code>. The key aspect of this package is that we build graphs by adding layers using “+”, which we call the “add operator”. In particular we will create a bar chart using <code>geom_bar()</code> from <code>ggplot2</code> <span class="citation" data-cites="citeggplot">(<a href="99-references.html#ref-citeggplot" role="doc-biblioref">Wickham 2016</a>)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>cleaned_elections_data <span class="sc">|&gt;</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> elected_party)) <span class="sc">+</span> <span class="co"># aes abbreviates "aesthetics" and</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># enables us to specify the x axis variable</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="02-drinking_from_a_fire_hose_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This accomplishes what we set out to do. But we can make it look a bit nicer by modifying the default options and improving the labels (<a href="#fig-canadanice">Figure&nbsp;<span>2.6</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>cleaned_elections_data <span class="sc">|&gt;</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> elected_party)) <span class="sc">+</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="co"># Make the theme neater</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Party"</span>,</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Number of seats"</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="co"># Make the labels more meaningful</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-canadanice" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="02-drinking_from_a_fire_hose_files/figure-html/fig-canadanice-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure 2.6: Number of seats won, by political party, at the 2022 Australian Federal Election</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="communicate" class="level3" data-number="2.2.5">
<h3 data-number="2.2.5" class="anchored" data-anchor-id="communicate"><span class="header-section-number">2.2.5</span> Communicate</h3>
<p>To this point we have downloaded some data, cleaned it, and made a graph. We would typically need to communicate what we have done at some length. In this case, we can write a few paragraphs about what we did, why we did it, and what we found to conclude our workflow. An example follows.</p>
<blockquote class="blockquote">
<p>Australia is a parliamentary democracy with 151 seats in the House of Representatives, which is the house from which government is formed. There are two major parties—“Liberal” and “Labor”—two minor parties—“Nationals” and “Greens”—and many smaller parties. The 2022 Federal Election occurred on 21 May, and around 15 million votes were cast. We were interested in the number of seats that were won by each party.</p>
<p>We downloaded the results, on a seat-specific basis, from the Australian Electoral Commission website. We cleaned and tidied the dataset using the statistical programming language R <span class="citation" data-cites="citeR">(<a href="99-references.html#ref-citeR" role="doc-biblioref">R Core Team 2022</a>)</span> including the <code>tidyverse</code> <span class="citation" data-cites="tidyverse">(<a href="99-references.html#ref-tidyverse" role="doc-biblioref">Wickham et al. 2019</a>)</span> and <code>janitor</code> <span class="citation" data-cites="janitor">(<a href="99-references.html#ref-janitor" role="doc-biblioref">Firke 2020</a>)</span>. We then created a graph of the number of seats that each political party won (<a href="#fig-canadanice">Figure&nbsp;<span>2.6</span></a>).</p>
<p>We found that the Labor Party won 77 seats, followed by the Liberal Party with 48 seats. The minor parties won the following number of seats: Nationals, 10 seats and the Greens, 4 seats. Finally, there were 10 Independents elected as well as candidates from a few other parties.</p>
<p>The distribution of seats is skewed toward the two major parties which could reflect relatively stable preferences on the part of Australian voters, or possibly inertia due to the benefits of already being a major party such a national network and funding, or some other reason. A better understanding of the reasons for this distribution are of interest in future work. While the dataset consists of everyone who voted, it worth noting that in Australia some are systematically excluded from voting; and it is much difficult for some to vote than others.</p>
</blockquote>
</section>
</section>
<section id="toronto-homelessness" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="toronto-homelessness"><span class="header-section-number">2.3</span> Toronto homelessness</h2>
<p>Toronto has a large homeless population <span class="citation" data-cites="torontohomeless">(<a href="99-references.html#ref-torontohomeless" role="doc-biblioref">City of Toronto 2021</a>)</span>. Freezing winters mean it is important there are enough places in shelters. In this example we will make a table of shelter usage in 2021 to compare average use in each month. Our expectation is that there is greater usage in the colder months, for instance, December, compared with warmer months, for instance, July.</p>
<section id="plan-1" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="plan-1"><span class="header-section-number">2.3.1</span> Plan</h3>
<p>The dataset that we are interested in would need to have date, the shelter, and the number of beds that were occupied that night. A quick sketch of a dataset that would work is <a href="#fig-torontohomeless-data">Figure&nbsp;<span>2.7 (a)</span></a>.</p>
<div id="fig-torontohomeless" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-torontohomeless-data" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/IMG_1817.png" class="img-fluid figure-img" data-ref-parent="fig-torontohomeless"></p>
<p></p><figcaption class="figure-caption">(a) Quick sketch of a dataset that could be useful for understanding shelter usage in Toronto</figcaption><p></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 50.0%;justify-content: center;">
<div id="fig-torontohomeless-table" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/IMG_1818.png" class="img-fluid figure-img" data-ref-parent="fig-torontohomeless"></p>
<p></p><figcaption class="figure-caption">(b) Quick sketch of a table of the average number of beds occupied each month</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure 2.7: Sketches of a dataset and table related to the homelessness in Toronto</figcaption><p></p>
</figure>
</div>
<p>We are interested in creating a table that has the monthly average number of beds occupied each night. The table would probably look something like <a href="#fig-torontohomeless-table">Figure&nbsp;<span>2.7 (b)</span></a>.</p>
</section>
<section id="simulate-1" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="simulate-1"><span class="header-section-number">2.3.2</span> Simulate</h3>
<p>The next step is to simulate some data that could resemble our dataset. Simulation provides us with an opportunity to think deeply about our data generating process.</p>
<p>In RStudio Cloud make a new Quarto Document, save it, and make a new R code chunk and add preamble documentation. Then install and/or load the packages that are needed. We will again use <code>tidyverse</code> <span class="citation" data-cites="Wickham2017">(<a href="99-references.html#ref-Wickham2017" role="doc-biblioref">Wickham 2017</a>)</span>, <code>janitor</code> <span class="citation" data-cites="janitor">(<a href="99-references.html#ref-janitor" role="doc-biblioref">Firke 2020</a>)</span>, and <code>tidyr</code> <span class="citation" data-cites="citetidyr">(<a href="99-references.html#ref-citetidyr" role="doc-biblioref">Wickham 2021</a>)</span>. As those were installed earlier, they do not need to be installed again. In this example we will also use <code>lubridate</code> <span class="citation" data-cites="GrolemundWickham2011">(<a href="99-references.html#ref-GrolemundWickham2011" role="doc-biblioref">Grolemund and Wickham 2011</a>)</span>, which is part of the <code>tidyverse</code> and so it does not need to be installed independently. We will also use <code>opendatatoronto</code> <span class="citation" data-cites="citeSharla">(<a href="99-references.html#ref-citeSharla" role="doc-biblioref">Gelfand 2020</a>)</span>, and <code>knitr</code> <span class="citation" data-cites="citeknitr">(<a href="99-references.html#ref-citeknitr" role="doc-biblioref">Xie 2021</a>)</span> and these will need to be installed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Preamble ####</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Purpose: Get data about 2021 houseless shelter usage and make a table</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Author: Rohan Alexander</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Email: rohan.alexander@utoronto.ca</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Date: 1 July 2022</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Prerequisites: -</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="do">#### Workspace set-up ####</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"opendatatoronto"</span>)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"lubridate"</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"knitr"</span>)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(opendatatoronto)</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">

</div>
<p>To add a bit more detail to the earlier example, packages contain code that other people have written. There are a few common ones that you will see regularly, especially the <code>tidyverse</code>. To use a package, we must first install it and then we need to load it. A package only needs to be installed once per computer but must be loaded every time. So, the packages that we installed earlier do not need to be reinstalled here.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Shoulders of giants
</div>
</div>
<div class="callout-body-container callout-body">
<p>Dr Robert Gentleman and Dr Ross Ihaka are the co-creators of R.</p>
<p>After taking a PhD in Statistics from the University of Washington in 1988, Robert moved to the University of Auckland, then went onto various roles including 23andMe and is now the Executive Director of the Center for Computational Biomedicine at Harvard Medical School.</p>
<p>Ross took a PhD in Statistics from the University of California, Berkeley, in 1985, a thesis titled ‘Ruaumoko’, which is the Māori god of earthquakes. He then moved to the University of Auckland where he remained for his entire career. He was awarded the Pickering Medal in 2008 by the Royal Society of New Zealand Te Apārangi.</p>
</div>
</div>
<p>Given that folks freely gave up their time to make R and the packages that we use, it is important to cite them. To get the information that is needed, we use <code>citation()</code>. When run without any arguments, that provides the citation information for R itself, and when run with an argument that is the name of a package, it provides the citation information for that package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">citation</span>() <span class="co"># Get the citation information for R</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
To cite R in publications use:

  R Core Team (2021). R: A language and environment for statistical
  computing. R Foundation for Statistical Computing, Vienna, Austria.
  URL https://www.R-project.org/.

A BibTeX entry for LaTeX users is

  @Manual{,
    title = {R: A Language and Environment for Statistical Computing},
    author = {{R Core Team}},
    organization = {R Foundation for Statistical Computing},
    address = {Vienna, Austria},
    year = {2021},
    url = {https://www.R-project.org/},
  }

We have invested a lot of time and effort in creating R, please cite it
when using it for data analysis. See also 'citation("pkgname")' for
citing R packages.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">citation</span>(<span class="st">"ggplot2"</span>) <span class="co"># Get citation information for a package</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
To cite ggplot2 in publications, please use:

  H. Wickham. ggplot2: Elegant Graphics for Data Analysis.
  Springer-Verlag New York, 2016.

A BibTeX entry for LaTeX users is

  @Book{,
    author = {Hadley Wickham},
    title = {ggplot2: Elegant Graphics for Data Analysis},
    publisher = {Springer-Verlag New York},
    year = {2016},
    isbn = {978-3-319-24277-4},
    url = {https://ggplot2.tidyverse.org},
  }</code></pre>
</div>
</div>
<p>Turning to the simulation, we need three columns: “date”, “shelter”, and “occupancy”. This example will build on the earlier one by adding a seed using <code>set.seed()</code>. A seed enables us to always generate the same random data whenever we run the same code. Any integer can be used as the seed. In this case the seed will be 853. If you use that as your seed, then you should get the same random numbers as in this example. If you use a different seed, then you should expect different random numbers. Finally, we use <code>rep()</code> to repeat something a certain number of times. For instance, we repeat “Shelter 1”, 365 times which accounts for about a year.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Simulate ####</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>simulated_occupancy_data <span class="ot">&lt;-</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> <span class="fu">rep</span>(<span class="at">x =</span> <span class="fu">as.Date</span>(<span class="st">"2021-01-01"</span>) <span class="sc">+</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">364</span>), <span class="at">times =</span> <span class="dv">3</span>),</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Based on Dirk Eddelbuettel: https://stackoverflow.com/a/21502386</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">shelter =</span> <span class="fu">c</span>(</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rep</span>(<span class="at">x =</span> <span class="st">"Shelter 1"</span>, <span class="at">times =</span> <span class="dv">365</span>),</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rep</span>(<span class="at">x =</span> <span class="st">"Shelter 2"</span>, <span class="at">times =</span> <span class="dv">365</span>),</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rep</span>(<span class="at">x =</span> <span class="st">"Shelter 3"</span>, <span class="at">times =</span> <span class="dv">365</span>)</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">number_occupied =</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rpois</span>(</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">n =</span> <span class="dv">365</span> <span class="sc">*</span> <span class="dv">3</span>,</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">lambda =</span> <span class="dv">30</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>      ) <span class="co"># Draw 552 times from the Poisson distribution</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(simulated_occupancy_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  date       shelter   number_occupied
  &lt;date&gt;     &lt;chr&gt;               &lt;int&gt;
1 2021-01-01 Shelter 1              28
2 2021-01-02 Shelter 1              29
3 2021-01-03 Shelter 1              35
4 2021-01-04 Shelter 1              25
5 2021-01-05 Shelter 1              21
6 2021-01-06 Shelter 1              30</code></pre>
</div>
</div>
<p>In this simulation we first create a list of all the dates in 2021. We repeat that list three times. We assume data for three shelters for every day of the year. To simulate the number of beds that are occupied each night, we draw from a Poisson distribution, assuming a mean number of 30 beds occupied per shelter, although this is just an arbitrary choice. By way of background, a Poisson distribution is often used when we have count data, and we return to it in <a href="14-ijalm.html"><span>Chapter&nbsp;14</span></a>.</p>
</section>
<section id="acquire-1" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="acquire-1"><span class="header-section-number">2.3.3</span> Acquire</h3>
<p>We use data made available about Toronto homeless shelters by the City of Toronto. The premise of the data is that each night at 4am a count is made of the occupied beds. To access the data, we use <code>opendatatoronto</code> <span class="citation" data-cites="citeSharla">(<a href="99-references.html#ref-citeSharla" role="doc-biblioref">Gelfand 2020</a>)</span> and then save our own copy.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Acquire ####</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>toronto_shelters <span class="ot">&lt;-</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Each package is associated with a unique id which can be found</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># in the "For Developers" tab of the relevant page from Open Data Toronto</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># https://open.toronto.ca/dataset/daily-shelter-overnight-service-occupancy-capacity/</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list_package_resources</span>(<span class="st">"21c83b32-d5a8-4106-a54f-010dbe49f6f2"</span>) <span class="sc">|&gt;</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Within that package, we are interested in the 2021 dataset</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"daily-shelter-overnight-service-occupancy-capacity-2021"</span>) <span class="sc">|&gt;</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Having reduce the dataset down to one row we can get the resource</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_resource</span>()</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> toronto_shelters,</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"toronto_shelters.csv"</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(toronto_shelters)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">

</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 32
    `_id` OCCUPANCY_DATE ORGAN…¹ ORGAN…² SHELT…³ SHELT…⁴ LOCAT…⁵ LOCAT…⁶ LOCAT…⁷
    &lt;dbl&gt; &lt;date&gt;           &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  
1 7272806 2021-01-01          24 COSTI …      40 COSTI …    1103 COSTI/… 1677 W…
2 7272807 2021-01-01          24 COSTI …      40 COSTI …    1103 COSTI/… 1677 W…
3 7272808 2021-01-01          24 COSTI …      40 COSTI …    1103 COSTI/… 1677 W…
4 7272809 2021-01-01          24 COSTI …      40 COSTI …    1103 COSTI/… 1677 W…
5 7272810 2021-01-01          24 COSTI …      40 COSTI …    1103 COSTI/… 1677 W…
6 7272811 2021-01-01          24 COSTI …      40 COSTI …    1051 COSTI … 100 Li…
# … with 23 more variables: LOCATION_POSTAL_CODE &lt;chr&gt;, LOCATION_CITY &lt;chr&gt;,
#   LOCATION_PROVINCE &lt;chr&gt;, PROGRAM_ID &lt;dbl&gt;, PROGRAM_NAME &lt;chr&gt;,
#   SECTOR &lt;chr&gt;, PROGRAM_MODEL &lt;chr&gt;, OVERNIGHT_SERVICE_TYPE &lt;chr&gt;,
#   PROGRAM_AREA &lt;chr&gt;, SERVICE_USER_COUNT &lt;dbl&gt;, CAPACITY_TYPE &lt;chr&gt;,
#   CAPACITY_ACTUAL_BED &lt;dbl&gt;, CAPACITY_FUNDING_BED &lt;dbl&gt;, OCCUPIED_BEDS &lt;dbl&gt;,
#   UNOCCUPIED_BEDS &lt;dbl&gt;, UNAVAILABLE_BEDS &lt;dbl&gt;, CAPACITY_ACTUAL_ROOM &lt;dbl&gt;,
#   CAPACITY_FUNDING_ROOM &lt;dbl&gt;, OCCUPIED_ROOMS &lt;dbl&gt;, …
# ℹ Use `colnames()` to see all variable names</code></pre>
</div>
</div>
<p>Not much needs to be done to this to make it similar to the dataset that we were interested in (<a href="#fig-torontohomeless-data">Figure&nbsp;<span>2.7 (a)</span></a>). We need to change the names to make them easier to type using <code>clean_names()</code>, and reduce the columns to only those that are relevant using <code>select()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>toronto_shelters_clean <span class="ot">&lt;-</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>(toronto_shelters) <span class="sc">|&gt;</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(occupancy_date, id, occupied_beds)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(toronto_shelters_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  occupancy_date      id occupied_beds
  &lt;date&gt;           &lt;dbl&gt;         &lt;dbl&gt;
1 2021-01-01     7272806            NA
2 2021-01-01     7272807            NA
3 2021-01-01     7272808            NA
4 2021-01-01     7272809            NA
5 2021-01-01     7272810            NA
6 2021-01-01     7272811             6</code></pre>
</div>
</div>
<p>All that remains is to save the cleaned dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> toronto_shelters_clean,</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"cleaned_toronto_shelters.csv"</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">

</div>
</section>
<section id="explore-1" class="level3" data-number="2.3.4">
<h3 data-number="2.3.4" class="anchored" data-anchor-id="explore-1"><span class="header-section-number">2.3.4</span> Explore</h3>
<p>First, we load the dataset that we just created.</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Explore ####</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>toronto_shelters_clean <span class="ot">&lt;-</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"cleaned_toronto_shelters.csv"</span>,</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The dataset contains records on a daily basis for each shelter. We are interested in understanding average usage for each month. To do this, we need to add a month column, which we do using <code>month()</code> from <code>lubridate</code> <span class="citation" data-cites="GrolemundWickham2011">(<a href="99-references.html#ref-GrolemundWickham2011" role="doc-biblioref">Grolemund and Wickham 2011</a>)</span>. By default, <code>month()</code> provides the number of the month, and so we include two arguments “label” and “abbr” to get the full name of the month. We remove rows that do not have any data for the number of beds using <code>drop_na()</code> from <code>tidyr</code>. We will do this here unthinkingly just because our focus is on getting started, but this is an important decision that we talk more about in <a href="08-farm.html"><span>Chapter&nbsp;8</span></a> and would normally require extensive justification. And we then create a summary statistic on the basis of monthly groups, using <code>summarize()</code> from <code>dplyr</code> <span class="citation" data-cites="citedplyr">(<a href="99-references.html#ref-citedplyr" role="doc-biblioref">Wickham et al. 2022</a>)</span>. We use <code>kable()</code> from <code>knitr</code> <span class="citation" data-cites="citeknitr">(<a href="99-references.html#ref-citeknitr" role="doc-biblioref">Xie 2021</a>)</span> to create a table.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>toronto_shelters_clean <span class="sc">|&gt;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">occupancy_month =</span> <span class="fu">month</span>(</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    occupancy_date,</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="cn">TRUE</span>,</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">abbr =</span> <span class="cn">FALSE</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(occupied_beds) <span class="sc">|&gt;</span> <span class="co"># We only want rows that have data</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(occupancy_month) <span class="sc">|&gt;</span> <span class="co"># We want the occupancy by month</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">number_occupied =</span> <span class="fu">mean</span>(occupied_beds)) <span class="sc">|&gt;</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<thead>
<tr class="header">
<th style="text-align: left;">occupancy_month</th>
<th style="text-align: right;">number_occupied</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">January</td>
<td style="text-align: right;">28.55708</td>
</tr>
<tr class="even">
<td style="text-align: left;">February</td>
<td style="text-align: right;">27.73821</td>
</tr>
<tr class="odd">
<td style="text-align: left;">March</td>
<td style="text-align: right;">27.18521</td>
</tr>
<tr class="even">
<td style="text-align: left;">April</td>
<td style="text-align: right;">26.31561</td>
</tr>
<tr class="odd">
<td style="text-align: left;">May</td>
<td style="text-align: right;">27.42596</td>
</tr>
<tr class="even">
<td style="text-align: left;">June</td>
<td style="text-align: right;">28.88300</td>
</tr>
<tr class="odd">
<td style="text-align: left;">July</td>
<td style="text-align: right;">29.67137</td>
</tr>
<tr class="even">
<td style="text-align: left;">August</td>
<td style="text-align: right;">30.83975</td>
</tr>
<tr class="odd">
<td style="text-align: left;">September</td>
<td style="text-align: right;">31.65405</td>
</tr>
<tr class="even">
<td style="text-align: left;">October</td>
<td style="text-align: right;">32.32991</td>
</tr>
<tr class="odd">
<td style="text-align: left;">November</td>
<td style="text-align: right;">33.26980</td>
</tr>
<tr class="even">
<td style="text-align: left;">December</td>
<td style="text-align: right;">33.57806</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>As with before, this looks fine, and achieves what we set out to do. But we can make some tweaks to the defaults to make it look even better (<a href="#tbl-homelessoccupancy">Table&nbsp;<span>2.1</span></a>). We can add a caption, make the column names easier to read, only show an appropriate level of decimal places, and improve the formatting.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>toronto_shelters_clean <span class="sc">|&gt;</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">occupancy_month =</span> <span class="fu">month</span>(</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    occupancy_date,</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="cn">TRUE</span>,</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">abbr =</span> <span class="cn">FALSE</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(occupied_beds) <span class="sc">|&gt;</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(occupancy_month) <span class="sc">|&gt;</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">number_occupied =</span> <span class="fu">mean</span>(occupied_beds)) <span class="sc">|&gt;</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">col.names =</span> <span class="fu">c</span>(</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Month"</span>,</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Average daily number of occupied beds"</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">digits =</span> <span class="dv">1</span>,</span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">booktabs =</span> <span class="cn">TRUE</span>,</span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">linesep =</span> <span class="st">""</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="tbl-homelessoccupancy" class="anchored">
<table class="table table-sm table-striped">
<caption>Table 2.1: Homeless shelter usage in Toronto in 2021</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Month</th>
<th style="text-align: right;">Average daily number of occupied beds</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">January</td>
<td style="text-align: right;">28.6</td>
</tr>
<tr class="even">
<td style="text-align: left;">February</td>
<td style="text-align: right;">27.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">March</td>
<td style="text-align: right;">27.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">April</td>
<td style="text-align: right;">26.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">May</td>
<td style="text-align: right;">27.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">June</td>
<td style="text-align: right;">28.9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">July</td>
<td style="text-align: right;">29.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">August</td>
<td style="text-align: right;">30.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">September</td>
<td style="text-align: right;">31.7</td>
</tr>
<tr class="even">
<td style="text-align: left;">October</td>
<td style="text-align: right;">32.3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">November</td>
<td style="text-align: right;">33.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">December</td>
<td style="text-align: right;">33.6</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="communicate-1" class="level3" data-number="2.3.5">
<h3 data-number="2.3.5" class="anchored" data-anchor-id="communicate-1"><span class="header-section-number">2.3.5</span> Communicate</h3>
<p>We need to write a few brief paragraphs about what we did, why we did it, and what we found to sum up our work. An example follows.</p>
<blockquote class="blockquote">
<p>Toronto has a large homeless population. Freezing winters mean it is critical there are enough places in shelters. We are interested to understand how usage of shelters changes in colder months, compared with warmer months.</p>
<p>We use data provided by the City of Toronto about Toronto homeless shelter bed occupancy. Specifically, at 4am each night a count is made of the occupied beds. We are interested in averaging this over the month. We cleaned, tidied, and analyzed the dataset using the statistical programming language R <span class="citation" data-cites="citeR">(<a href="99-references.html#ref-citeR" role="doc-biblioref">R Core Team 2022</a>)</span> as well as the <code>tidyverse</code> <span class="citation" data-cites="Wickham2017">(<a href="99-references.html#ref-Wickham2017" role="doc-biblioref">Wickham 2017</a>)</span>, <code>janitor</code> <span class="citation" data-cites="janitor">(<a href="99-references.html#ref-janitor" role="doc-biblioref">Firke 2020</a>)</span>, <code>tidyr</code> <span class="citation" data-cites="citetidyr">(<a href="99-references.html#ref-citetidyr" role="doc-biblioref">Wickham 2021</a>)</span>, <code>opendatatoronto</code> <span class="citation" data-cites="citeSharla">(<a href="99-references.html#ref-citeSharla" role="doc-biblioref">Gelfand 2020</a>)</span>, <code>lubridate</code> <span class="citation" data-cites="GrolemundWickham2011">(<a href="99-references.html#ref-GrolemundWickham2011" role="doc-biblioref">Grolemund and Wickham 2011</a>)</span>, and <code>knitr</code> <span class="citation" data-cites="citeknitr">(<a href="99-references.html#ref-citeknitr" role="doc-biblioref">Xie 2021</a>)</span>. We then made a table of the average number of occupied beds each night for each month (<a href="#tbl-homelessoccupancy">Table&nbsp;<span>2.1</span></a>).</p>
<p>We found that the daily average number of occupied beds was higher in December 2021 than July 2021, with 34 occupied beds in December, compared with 30 in July (<a href="#tbl-homelessoccupancy">Table&nbsp;<span>2.1</span></a>). More generally, there was a steady increase in the daily average number of occupied beds between July and December, with a slight overall increase each month.</p>
<p>The dataset is on the basis of shelters, and so our results may be skewed by changes that are specific to especially large or small shelters. It may be that specific shelters are particularly attractive in colder months. Additionally, we were concerned with counts of the number of occupied beds, but if the supply of beds changes over the season, then an additional statistic of interest would be proportion occupied.</p>
</blockquote>
<p>Although this example is only a few paragraphs, it could be reduced to form an abstract, or increased to form a full report, for instance, by expanding each paragraph into a section. The first paragraph is a general overview, the second focuses on the data, the third on the results, and the fourth is a discussion.</p>
</section>
</section>
<section id="neonatal-mortality" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="neonatal-mortality"><span class="header-section-number">2.4</span> Neonatal mortality</h2>
<p>Neonatal mortality refers to a death that occurs within the first month of life, and in particular, the neonatal mortality rate (NMR) is the number of neonatal deaths per 1,000 live births <span class="citation" data-cites="unigme">(<a href="99-references.html#ref-unigme" role="doc-biblioref">UN IGME 2021</a>)</span>. The Third Sustainable Development Goal calls for a reduction in NMR to 12. In this example we will create a graph of the estimated NMR for the past fifty years for: Argentina, Australia, Canada, and Kenya.</p>
<section id="plan-2" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="plan-2"><span class="header-section-number">2.4.1</span> Plan</h3>
<p>For this example, we need to think about what our dataset should look like, and what the graph should look like.</p>
<p>The dataset needs to have columns that specify the country, and the year. It also needs to have a column with the NMR estimate for that year for that country. Roughly, it should look like <a href="#fig-nmrexample-data">Figure&nbsp;<span>2.8 (a)</span></a>.</p>
<div id="fig-nmrexample" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 44.4%;justify-content: center;">
<div id="fig-nmrexample-data" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/IMG_1812.png" class="img-fluid figure-img" data-ref-parent="fig-nmrexample"></p>
<p></p><figcaption class="figure-caption">(a) Quick sketch of a potentially useful NMR dataset</figcaption><p></p>
</figure>
</div>
</div>
<div class="quarto-layout-cell quarto-layout-cell-subref" style="flex-basis: 55.6%;justify-content: center;">
<div id="fig-nmrexample-graph" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="figures/IMG_1813.png" class="img-fluid figure-img" data-ref-parent="fig-nmrexample"></p>
<p></p><figcaption class="figure-caption">(b) Quick sketch of a graph of NMR by country over time</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure 2.8: Sketches of a dataset and graph related to the neonatal mortality rate (NMR)</figcaption><p></p>
</figure>
</div>
<p>We are interested to make a graph with year on the x-axis and estimated NMR on the y-axis. Each country should have its own series. A quick sketch of what we are looking for is <a href="#fig-nmrexample-graph">Figure&nbsp;<span>2.8 (b)</span></a>.</p>
</section>
<section id="simulate-2" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="simulate-2"><span class="header-section-number">2.4.2</span> Simulate</h3>
<p>We would like to simulate some data that aligns with our plan. In this case we will need three columns: country, year, and NMR.</p>
<p>Within RStudio Cloud, make a new Quarto Document and save it. Add preamble documentation and set-up the workspace. We will use <code>tidyverse</code> <span class="citation" data-cites="Wickham2017">(<a href="99-references.html#ref-Wickham2017" role="doc-biblioref">Wickham 2017</a>)</span>, <code>janitor</code> <span class="citation" data-cites="janitor">(<a href="99-references.html#ref-janitor" role="doc-biblioref">Firke 2020</a>)</span>, and <code>lubridate</code> <span class="citation" data-cites="GrolemundWickham2011">(<a href="99-references.html#ref-GrolemundWickham2011" role="doc-biblioref">Grolemund and Wickham 2011</a>)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Preamble ####</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Purpose: Obtain and prepare data about neonatal mortality for four</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="co"># countries for the past fifty years and create a graph.</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Author: Rohan Alexander</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Email: rohan.alexander@utoronto.ca</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Date: 1 July 2022</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Prerequisites: -</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="do">#### Workspace set-up ####</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">

</div>
<p>The code contained in packages can change from time to time as the authors update it and release new versions. We can see which version of a package we are using with <code>packageVersion()</code>. For instance, we are using version 1.3.1 of the <code>tidyverse</code> and version 2.1.0 of <code>janitor</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">packageVersion</span>(<span class="st">"tidyverse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] '1.3.2'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">packageVersion</span>(<span class="st">"janitor"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] '2.1.0'</code></pre>
</div>
</div>
<p>To update the version of all of the packages that we have installed, we use <code>update.packages()</code>. We can use <code>tidyverse_update()</code> to just install the <code>tidyverse</code> packages.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">update.packages</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This does not need to be run, say, every day, but from time-to-time it is worth updating packages. While many packages take care to ensure backward compatibility, at a certain point this does not become reasonable, and so it is important to be aware that updating packages can result in old code needing to be re-written.</p>
<p>Returning to the simulation, we repeat the name of each country 50 times with <code>rep()</code>, and enable the passing of 50 years. Finally, we draw from the uniform distribution with <code>runif()</code> to simulate an estimated NMR value for that year for that country.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Simulate data ####</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>simulated_nmr_data <span class="ot">&lt;-</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">country =</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rep</span>(<span class="st">"Argentina"</span>, <span class="dv">50</span>),</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rep</span>(<span class="st">"Australia"</span>, <span class="dv">50</span>),</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rep</span>(<span class="st">"Canada"</span>, <span class="dv">50</span>),</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rep</span>(<span class="st">"Kenya"</span>, <span class="dv">50</span>)</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1971</span><span class="sc">:</span><span class="dv">2020</span>), <span class="dv">4</span>),</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">nmr =</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">runif</span>(</span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">n =</span> <span class="dv">200</span>,</span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">min =</span> <span class="dv">0</span>,</span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">max =</span> <span class="dv">100</span></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(simulated_nmr_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country    year   nmr
  &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt;
1 Argentina  1971 35.9 
2 Argentina  1972 12.0 
3 Argentina  1973 48.4 
4 Argentina  1974 31.6 
5 Argentina  1975  3.74
6 Argentina  1976 40.4 </code></pre>
</div>
</div>
<p>While this simulation works, it would be time-consuming and error-prone if we decided that instead of fifty years, we were interested in simulating, say, sixty years. One way to make this easier is to replace all instances of 50 with a variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Simulate data ####</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>number_of_years <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>simulated_nmr_data <span class="ot">&lt;-</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">country =</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rep</span>(<span class="st">"Argentina"</span>, number_of_years),</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rep</span>(<span class="st">"Australia"</span>, number_of_years),</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rep</span>(<span class="st">"Canada"</span>, number_of_years),</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rep</span>(<span class="st">"Kenya"</span>, number_of_years)</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span>number_of_years <span class="sc">+</span> <span class="dv">1970</span>), <span class="dv">4</span>),</span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">nmr =</span></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">runif</span>(</span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">n =</span> number_of_years <span class="sc">*</span> <span class="dv">4</span>,</span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">min =</span> <span class="dv">0</span>,</span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">max =</span> <span class="dv">100</span></span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(simulated_nmr_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country    year   nmr
  &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;
1 Argentina  1971 35.9 
2 Argentina  1972 12.0 
3 Argentina  1973 48.4 
4 Argentina  1974 31.6 
5 Argentina  1975  3.74
6 Argentina  1976 40.4 </code></pre>
</div>
</div>
<p>The result will be the same, but now if we want to change from fifty to sixty years, we only have to make the change in one place.</p>
<p>We can have confidence in this simulated dataset because it is relatively straight-forward, and we wrote the code for it. But when we turn to the real dataset, it is more difficult to be sure that it is what it claims to be. Even if we trust the data, it is important that we can share that confidence with others. One way forward is to establish some checks that prove our data are as they should be. For instance, we expect:</p>
<ol type="1">
<li>That “country” is exclusively one of these four: “Argentina”, “Australia”, “Canada”, or “Kenya”.</li>
<li>Conversely, “country” contains all those four countries.</li>
<li>That “year” is no smaller than 1971 and no larger than 2020, and is an integer, not a letter or a number with decimal places.</li>
<li>That “nmr” is a value somewhere between 0 and 1,000, and is a number.</li>
</ol>
<p>We can write a series of tests based on these features, that we expect that dataset to pass.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>simulated_nmr_data<span class="sc">$</span>country <span class="sc">|&gt;</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">==</span> <span class="fu">c</span>(</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Argentina"</span>,</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Australia"</span>,</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Canada"</span>,</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Kenya"</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>simulated_nmr_data<span class="sc">$</span>country <span class="sc">|&gt;</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">|&gt;</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">length</span>() <span class="sc">==</span> <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>simulated_nmr_data<span class="sc">$</span>year <span class="sc">|&gt;</span> <span class="fu">min</span>() <span class="sc">==</span> <span class="dv">1971</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>simulated_nmr_data<span class="sc">$</span>year <span class="sc">|&gt;</span> <span class="fu">max</span>() <span class="sc">==</span> <span class="dv">2020</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>simulated_nmr_data<span class="sc">$</span>nmr <span class="sc">|&gt;</span> <span class="fu">min</span>() <span class="sc">&gt;=</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>simulated_nmr_data<span class="sc">$</span>nmr <span class="sc">|&gt;</span> <span class="fu">max</span>() <span class="sc">&lt;=</span> <span class="dv">1000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>simulated_nmr_data<span class="sc">$</span>nmr <span class="sc">|&gt;</span> <span class="fu">class</span>() <span class="sc">==</span> <span class="st">"numeric"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Having passed these tests, we can have confidence in the simulated dataset. More importantly, we can apply these tests to the real dataset. This enables us to have greater confidence in that dataset and to share that confidence with others.</p>
</section>
<section id="acquire-2" class="level3" data-number="2.4.3">
<h3 data-number="2.4.3" class="anchored" data-anchor-id="acquire-2"><span class="header-section-number">2.4.3</span> Acquire</h3>
<p>The UN Inter-agency Group for Child Mortality Estimation (IGME) <a href="https://childmortality.org/">provides</a> estimates of the NMR that we can download and save.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Acquire data ####</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>raw_igme_data <span class="ot">&lt;-</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">file =</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"https://childmortality.org/wp-content/uploads/2021/09/UNIGME-2021.csv"</span>,</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(</span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> raw_igme_data,</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"igme.csv"</span></span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">

</div>
<p>We can take a quick look at the dataset to get a better sense of it. We might be interested in what the dataset seems to look like (using <code>head()</code> and <code>tail()</code>), and what the names of the columns are (using <code>names()</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(raw_igme_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 29
  Geogra…¹ Indic…² Sex   Wealt…³ Serie…⁴ Serie…⁵ Regio…⁶ TIME_…⁷ OBS_V…⁸ COUNT…⁹
  &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;  
1 Afghani… Neonat… Total Total   Multip… 2003    &lt;NA&gt;    1981-01    36   &lt;NA&gt;   
2 Afghani… Neonat… Total Total   Multip… 2003    &lt;NA&gt;    1986-01    25   &lt;NA&gt;   
3 Afghani… Neonat… Total Total   Multip… 2003    &lt;NA&gt;    1991-01    18.9 &lt;NA&gt;   
4 Afghani… Neonat… Total Total   Multip… 2003    &lt;NA&gt;    1996-01    19.1 &lt;NA&gt;   
5 Afghani… Neonat… Total Total   Multip… 2003    &lt;NA&gt;    2001-01    20.7 &lt;NA&gt;   
6 Afghani… Neonat… Total Total   Afghan… 2010    &lt;NA&gt;    1987-06    39.7 &lt;NA&gt;   
# … with 19 more variables: CONNECTION &lt;lgl&gt;, DEATH_CATEGORY &lt;lgl&gt;,
#   CATEGORY &lt;chr&gt;, `Observation Status` &lt;chr&gt;, `Unit of measure` &lt;chr&gt;,
#   `Series Category` &lt;chr&gt;, `Series Type` &lt;chr&gt;, STD_ERR &lt;dbl&gt;,
#   REF_DATE &lt;dbl&gt;, `Age Group of Women` &lt;chr&gt;, `Time Since First Birth` &lt;chr&gt;,
#   DEFINITION &lt;chr&gt;, INTERVAL &lt;dbl&gt;, `Series Method` &lt;chr&gt;, LOWER_BOUND &lt;dbl&gt;,
#   UPPER_BOUND &lt;dbl&gt;, STATUS &lt;chr&gt;, YEAR_TO_ACHIEVE &lt;chr&gt;, `Model Used` &lt;chr&gt;,
#   and abbreviated variable names ¹​`Geographic area`, ²​Indicator, …
# ℹ Use `colnames()` to see all variable names</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(raw_igme_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Geographic area"        "Indicator"              "Sex"                   
 [4] "Wealth Quintile"        "Series Name"            "Series Year"           
 [7] "Regional group"         "TIME_PERIOD"            "OBS_VALUE"             
[10] "COUNTRY_NOTES"          "CONNECTION"             "DEATH_CATEGORY"        
[13] "CATEGORY"               "Observation Status"     "Unit of measure"       
[16] "Series Category"        "Series Type"            "STD_ERR"               
[19] "REF_DATE"               "Age Group of Women"     "Time Since First Birth"
[22] "DEFINITION"             "INTERVAL"               "Series Method"         
[25] "LOWER_BOUND"            "UPPER_BOUND"            "STATUS"                
[28] "YEAR_TO_ACHIEVE"        "Model Used"            </code></pre>
</div>
</div>
<p>We would like to clean up the names and only keep the rows and columns that we are interested in. Based on our plan, we are interested in rows where “Sex” is “Total”, “Series Name” is “UN IGME estimate”, “Geographic area” is one of “Argentina”, “Australia”, “Canada”, and “Kenya”, and the “Indicator” is “Neonatal mortality rate”. After this we are interested in just a few columns: “geographic_area”, “time_period”, and “obs_value”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>cleaned_igme_data <span class="ot">&lt;-</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>(raw_igme_data) <span class="sc">|&gt;</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    sex <span class="sc">==</span> <span class="st">"Total"</span>,</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>    series_name <span class="sc">==</span> <span class="st">"UN IGME estimate"</span>,</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>    geographic_area <span class="sc">%in%</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(<span class="st">"Argentina"</span>, <span class="st">"Australia"</span>, <span class="st">"Canada"</span>, <span class="st">"Kenya"</span>),</span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>    indicator <span class="sc">==</span> <span class="st">"Neonatal mortality rate"</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>    geographic_area,</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>    time_period,</span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>    obs_value</span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cleaned_igme_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  geographic_area time_period obs_value
  &lt;chr&gt;           &lt;chr&gt;           &lt;dbl&gt;
1 Argentina       1970-06          24.9
2 Argentina       1971-06          24.7
3 Argentina       1972-06          24.6
4 Argentina       1973-06          24.6
5 Argentina       1974-06          24.5
6 Argentina       1975-06          24.1</code></pre>
</div>
</div>
<p>Finally, we need to fix two final aspects: the class of “time_period” is character when we need it to be a year, and the name of “obs_value” should be “nmr” to be more informative.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>cleaned_igme_data <span class="ot">&lt;-</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  cleaned_igme_data <span class="sc">|&gt;</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">time_period =</span> <span class="fu">str_remove</span>(time_period, <span class="st">"-06"</span>),</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">time_period =</span> <span class="fu">as.integer</span>(time_period)</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(time_period <span class="sc">&gt;=</span> <span class="dv">1971</span>) <span class="sc">|&gt;</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">nmr =</span> obs_value,</span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> time_period,</span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">country =</span> geographic_area</span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cleaned_igme_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country    year   nmr
  &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt;
1 Argentina  1971  24.7
2 Argentina  1972  24.6
3 Argentina  1973  24.6
4 Argentina  1974  24.5
5 Argentina  1975  24.1
6 Argentina  1976  23.3</code></pre>
</div>
</div>
<p>Finally, we can check that our dataset passes the tests that we developed based on the simulated dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Test the cleaned dataset</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>cleaned_igme_data<span class="sc">$</span>country <span class="sc">|&gt;</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">==</span> <span class="fu">c</span>(</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Argentina"</span>,</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Australia"</span>,</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Canada"</span>,</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Kenya"</span></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>cleaned_igme_data<span class="sc">$</span>country <span class="sc">|&gt;</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">|&gt;</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">length</span>() <span class="sc">==</span> <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>cleaned_igme_data<span class="sc">$</span>year <span class="sc">|&gt;</span> <span class="fu">min</span>() <span class="sc">==</span> <span class="dv">1971</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>cleaned_igme_data<span class="sc">$</span>year <span class="sc">|&gt;</span> <span class="fu">max</span>() <span class="sc">==</span> <span class="dv">2020</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>cleaned_igme_data<span class="sc">$</span>nmr <span class="sc">|&gt;</span> <span class="fu">min</span>() <span class="sc">&gt;=</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>cleaned_igme_data<span class="sc">$</span>nmr <span class="sc">|&gt;</span> <span class="fu">max</span>() <span class="sc">&lt;=</span> <span class="dv">1000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>cleaned_igme_data<span class="sc">$</span>nmr <span class="sc">|&gt;</span> <span class="fu">class</span>() <span class="sc">==</span> <span class="st">"numeric"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>All that remains is to save the nicely cleaned dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> cleaned_igme_data,</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"cleaned_igme_data.csv"</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">

</div>
</section>
<section id="explore-2" class="level3" data-number="2.4.4">
<h3 data-number="2.4.4" class="anchored" data-anchor-id="explore-2"><span class="header-section-number">2.4.4</span> Explore</h3>
<p>We would like to make a graph of estimated NMR using the cleaned dataset. First, we read in the dataset.</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="do">#### Explore ####</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>cleaned_igme_data <span class="ot">&lt;-</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">file =</span> <span class="st">"cleaned_igme_data.csv"</span>,</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can now make the graph that we are interested in (<a href="#fig-nmrgraph">Figure&nbsp;<span>2.9</span></a>). We are interested in showing how NMR has changed over time and the differences between countries.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>cleaned_igme_data <span class="sc">|&gt;</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> nmr, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Neonatal Mortality Rate (NMR)"</span>,</span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Country"</span></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-nmrgraph" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="02-drinking_from_a_fire_hose_files/figure-html/fig-nmrgraph-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Figure 2.9: Neonatal Mortality Rate (NMR), for Argentina, Australia, Canada, and Kenya (1971-2020)</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="communicate-2" class="level3" data-number="2.4.5">
<h3 data-number="2.4.5" class="anchored" data-anchor-id="communicate-2"><span class="header-section-number">2.4.5</span> Communicate</h3>
<p>To this point we downloaded some data, cleaned it, wrote some tests, and made a graph. We would typically need to communicate what we have done at some length. In this case, we will write a few paragraphs about what we did, why we did it, and what we found.</p>
<blockquote class="blockquote">
<p>Neonatal mortality refers to a death that occurs within the first month of life. In particular, the neonatal mortality rate (NMR) is the number of neonatal deaths per 1,000 live births. We obtain estimates for NMR for four countries—Argentina, Australia, Canada, and Kenya—over the past fifty years.</p>
<p>The UN Inter-agency Group for Child Mortality Estimation (IGME) provides estimates of the NMR at the website: https://childmortality.org/. We downloaded their estimates then cleaned and tidied the dataset using the statistical programming language R <span class="citation" data-cites="citeR">(<a href="99-references.html#ref-citeR" role="doc-biblioref">R Core Team 2022</a>)</span>.</p>
<p>We found considerable change in the estimated NMR over time and between the four countries of interest (<a href="#fig-nmrgraph">Figure&nbsp;<span>2.9</span></a>). We found that the 1970s tended to be associated with reductions in the estimated NMR. Australia and Canada were estimated to have a low NMR at that point and remained there through 2020, with further slight reductions. The estimates for Argentina and Kenya continued to have substantial reductions through 2020.</p>
<p>Our results suggest considerable improvements in estimated NMR over time. But it is worth emphasizing that estimates of the NMR are based on a statistical model and underlying data. The dual burden of data is that often high-quality data are less easily available for groups, in this case countries, with worse outcomes. Our conclusions are subject to the model that underpins the estimates, and the quality of the underlying data and we did not independently verify either of these.</p>
</blockquote>
</section>
</section>
<section id="concluding-remarks" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="concluding-remarks"><span class="header-section-number">2.5</span> Concluding remarks</h2>
<p>We have covered a lot of ground in this chapter, and it is normal to have not followed it all if you are new to R. The best way to proceed would be to go through each of the three case-studies in your own time. Type all the code out yourself, rather than copy-pasting, and run it bit by bit, even if you do not entirely understand what it is doing. Then try to add your own comments to it.</p>
<p>It is also the case that it is not necessary to fully understand everything in this chapter at this point. Some students find it best to continue going through the next few chapters of this book, and return to this one from time to time.</p>
</section>
<section id="exercises-and-tutorial" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="exercises-and-tutorial"><span class="header-section-number">2.6</span> Exercises and tutorial</h2>
<section id="exercises" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="exercises">Exercises</h3>
<ol type="1">
<li><em>(Plan)</em> Consider the following scenario: <em>Every day for a year a person records whether they donated $1, $2, or $3, to a homeless person that they pass as they leave their apartment building.</em> Please sketch what that dataset could look like, and then sketch a graph that you could build to show all observations.</li>
<li><em>(Simulate)</em> Please further consider the scenario described and decide which of the following could be used to simulate the situation (select all that apply)?
<ol type="a">
<li><code>runif(n = 365, min = 1, max = 3) |&gt; floor()</code></li>
<li><code>runif(n = 365, min = 1, max = 4) |&gt; floor()</code></li>
<li><code>sample(x = 1:3, size = 365, replace = TRUE)</code></li>
<li><code>sample(x = 1:3, size = 365, replace = FALSE)</code></li>
</ol></li>
<li><em>(Acquire)</em> Please identify one possible source of actual data about the amount of money that is donated to charity in a country that you are interested in.</li>
<li><em>(Explore)</em> Assume that <code>ggplot2</code> is loaded and the dataset “donations” has the column “amount”. Which of the following would result in a bar chart (pick one)?
<ol type="a">
<li><code>donations |&gt; geom_bar(aes(x = amount)) + ggplot()</code></li>
<li><code>amount |&gt; geom_bar(aes(x = donations)) + ggplot()</code></li>
<li><code>donations |&gt; ggplot(aes(x = amount)) + geom_bar()</code></li>
<li><code>amount |&gt; ggplot(aes(x = donations)) + geom_bar()</code></li>
</ol></li>
<li><em>(Communicate)</em> Please write two paragraphs as if you had gathered data from that source, and had built a graph. The exact details contained in the paragraphs do not have to be factual (i.e.&nbsp;you do not actually have to get the data nor create the graphs).</li>
<li>Following <span class="citation" data-cites="citeBarrett">Barrett (<a href="99-references.html#ref-citeBarrett" role="doc-biblioref">2021</a>)</span>, please write a stack of four or five atomic habits, related to learning data science, that you could implement this week.</li>
<li>What is not one of the four challenges for mitigating bias mentioned in <span class="citation" data-cites="hao2019">Hao (<a href="99-references.html#ref-hao2019" role="doc-biblioref">2019</a>)</span> (pick one)?
<ol type="a">
<li>Unknown unknowns.</li>
<li>Imperfect processes.</li>
<li>The definitions of fairness.</li>
<li>Lack of social context.</li>
<li>Disinterest given profit considerations.</li>
</ol></li>
<li>When was the dataset that underpins <span class="citation" data-cites="chambliss1989mundanity">Chambliss (<a href="99-references.html#ref-chambliss1989mundanity" role="doc-biblioref">1989</a>)</span> collected (pick one)?
<ol type="a">
<li>August 1983 to August 1984</li>
<li>January 1983 to August 1984</li>
<li>January 1983 to January 1984</li>
<li>August 1983 to January 1984</li>
</ol></li>
<li>When <span class="citation" data-cites="chambliss1989mundanity">Chambliss (<a href="99-references.html#ref-chambliss1989mundanity" role="doc-biblioref">1989</a>)</span> talks of stratification, what is he talking about?</li>
<li>How does <span class="citation" data-cites="chambliss1989mundanity">Chambliss (<a href="99-references.html#ref-chambliss1989mundanity" role="doc-biblioref">1989</a>)</span> define “excellence” (pick one)?
<ol type="a">
<li>Prolonged performance at world-class level.</li>
<li>All Olympic medal winners.</li>
<li>Consistent superiority of performance.</li>
<li>All national-level athletes.</li>
</ol></li>
<li>Think about the following quote from <span class="citation" data-cites="chambliss1989mundanity">Chambliss (<a href="99-references.html#ref-chambliss1989mundanity" role="doc-biblioref">1989, 81</a>)</span> and list three small skills or activities that could help you achieve excellence in data science.</li>
</ol>
<blockquote class="blockquote">
<p>Excellence is mundane. Superlative performance is really a confluence of dozens of small skills or activities, each one learned or stumbled upon, which have been carefully drilled into habit and then are fitted together in a synthesized whole. There is nothing extraordinary or super-human in any one of those actions; only the fact that they are done consistently and correctly, and all together, produce excellence.</p>
</blockquote>
<ol start="12" type="1">
<li>Which of the following are arguments for <code>read_csv()</code> from <code>readr</code> <span class="citation" data-cites="citereadr">(<a href="99-references.html#ref-citereadr" role="doc-biblioref">Wickham, Hester, and Bryan 2021</a>)</span> (select all that apply)? (Hint: You can access the help for the function with <code>?readr::read_csv()</code>.)
<ol type="a">
<li>“all_cols”</li>
<li>“file”</li>
<li>“show_col_types”</li>
<li>“number”</li>
</ol></li>
<li>We used <code>rpois()</code> and <code>runif()</code> to draw from the Poisson and Uniform distributions, respectively. Which of the following can be used to draw from the Normal and Binomial distributions (select all that apply)?
<ol type="a">
<li><code>rnormal()</code> and <code>rbinom()</code></li>
<li><code>rnorm()</code> and <code>rbinomial()</code></li>
<li><code>rnormal()</code> and <code>rbinomial()</code></li>
<li><code>rnorm()</code> and <code>rbinom()</code></li>
</ol></li>
<li>We used <code>rpois()</code> and <code>runif()</code> to draw from the Poisson and Uniform distributions, respectively. Which of the following can be used to draw from the Exponential and Cauchy distributions (select all that apply)?
<ol type="a">
<li><code>rexp()</code> and <code>rcau()</code></li>
<li><code>rexpon()</code> and <code>rcauchy()</code></li>
<li><code>rexp()</code> and <code>rcauchy()</code></li>
<li><code>rexpon()</code> and <code>rcau()</code></li>
</ol></li>
<li>What is the result of <code>sample(x = letters, size = 2)</code> when the seed is set to “853”? What about when the seed is set to “1234” (pick one)?
<ol type="a">
<li>‘“i” “q”’ and ‘“p” “v”’</li>
<li>‘“e” “l”’ and ‘“e” “r”’</li>
<li>‘“i” “q”’ and ‘“e” “r”’</li>
<li>‘“e” “l”’ and ‘“p” “v”’</li>
</ol></li>
<li>Which function provides the recommended citation to cite R (pick one)?
<ol type="a">
<li><code>cite("R")</code>.</li>
<li><code>cite()</code>.</li>
<li><code>citation("R")</code>.</li>
<li><code>citation()</code>.</li>
</ol></li>
<li>How do we get the citation information for <code>opendatatoronto</code> (pick one)?
<ol type="a">
<li>cite()</li>
<li>citation()</li>
<li>cite(“opendatatoronto”)</li>
<li>citation(“opendatatoronto”)</li>
</ol></li>
<li>Which argument needs to be changed to change the headings in <code>kable()</code> from <code>knitr</code> <span class="citation" data-cites="citeknitr">(<a href="99-references.html#ref-citeknitr" role="doc-biblioref">Xie 2021</a>)</span> (pick one)?
<ol type="a">
<li>“booktabs”</li>
<li>“col.names”</li>
<li>“digits”</li>
<li>“linesep”</li>
<li>“caption”</li>
</ol></li>
<li>Which function is used to update packages (pick one)?
<ol type="a">
<li><code>update.packages()</code></li>
<li><code>upgrade.packages()</code></li>
<li><code>revise.packages()</code></li>
<li><code>renovate.packages()</code></li>
</ol></li>
<li>What are some features that we might typically expect of a column that claimed to be a year (select all that apply)?
<ol type="a">
<li>The class is “character”.</li>
<li>There are no negative numbers.</li>
<li>There are letters in the column.</li>
<li>Each entry has four digits.</li>
</ol></li>
<li>Please consider the following code, add a small mistake to it, and then create a GitHub Gist that contains all of the code, and submit the URL.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>midwest <span class="sc">|&gt;</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> poptotal, <span class="at">y =</span> popdensity, <span class="at">color =</span> state)) <span class="sc">+</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tutorial" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="tutorial">Tutorial</h3>
<p>The purpose of this tutorial is to provide an opportunity to do a small self-contained project. We will redo the Australian Elections worked example, but for Canada.</p>
<p>Canada is a parliamentary democracy with 338 seats in the House of Commons, which is the lower house and that from which government is formed. There are two major parties – “Liberal” and “Conservative” – three minor parties – “Bloc Québécois”, “New Democratic”, and “Green” – and many smaller parties and independents. In this example we will create a graph of the number of seats that each party won in the 2021 Federal Election.</p>
<p>Begin by planning what the dataset that we need will look like, and what the final graph will look like. The basic requirement for the dataset is that it has the name of the seat (sometimes called a “riding” in Canada) and the party of the person elected.</p>
<p>Please do a quick sketch of the dataset that we would need. And then do a quick sketch of a graph that we might be interested in.</p>
<p>Then put together a Quarto Document that simulates some data. Add preamble documentation, then load the packages that are needed: <code>tidyverse</code>, <code>janitor</code>, and <code>tidyr</code>. Add numbers for the riding, then use <code>sample()</code> to randomly choose one of six options, with replacement, 338 times.</p>
<p>Next we need to get the actual data, from Elections Canada, and the file that we need to download is <a href="https://www.elections.ca/res/rep/off/ovr2021app/53/data_donnees/table_tableau11.csv">here</a>.</p>
<p>Clean the names, and then select the two columns that are of interest: “electoral_district_name_nom_de_circonscription”, and “elected_candidate_candidat_elu”. Finally, rename the columns to remove the French and simplify the names.</p>
<p>The column that we need is about the elected canadidates. That has the surname of the elected candidate, followed by a comma, followed by their first name, followed by a space, followed by the name of the party in both English and French, separated by a slash. Break-up this column into its pieces using <code>separate()</code> from <code>tidyr</code> <span class="citation" data-cites="citetidyr">(<a href="99-references.html#ref-citetidyr" role="doc-biblioref">Wickham 2021</a>)</span> and then use <code>select()</code> to just keep party information.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>cleaned_elections_data <span class="ot">&lt;-</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  cleaned_elections_data <span class="sc">|&gt;</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Separate the column into two based on the slash</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> elected_candidate,</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"Other"</span>, <span class="st">"party"</span>),</span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"/"</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove the "Other" column</span></span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>other)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then recode the party names from French to English to match what we simulated.</p>
<p>At this point we can make a nice graph of the number of ridings won by each party in the 2019 Canadian Federal Election.</p>


<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography" style="display: none">
<div id="ref-citeBarrett" class="csl-entry" role="doc-biblioentry">
Barrett, Malcolm. 2021. <em>Data Science as an Atomic Habit</em>. <a href="https://malco.io/2021/01/04/data-science-as-an-atomic-habit/">https://malco.io/2021/01/04/data-science-as-an-atomic-habit/</a>.
</div>
<div id="ref-chambliss1989mundanity" class="csl-entry" role="doc-biblioentry">
Chambliss, Daniel. 1989. <span>“The Mundanity of Excellence: An Ethnographic Report on Stratification and Olympic Swimmers.”</span> <em>Sociological Theory</em> 7 (1): 70–86. <a href="https://doi.org/10.2307/202063">https://doi.org/10.2307/202063</a>.
</div>
<div id="ref-torontohomeless" class="csl-entry" role="doc-biblioentry">
City of Toronto. 2021. <em>2021 Street Needs Assessment</em>. <a href="https://www.toronto.ca/city-government/data-research-maps/research-reports/housing-and-homelessness-research-and-reports/">https://www.toronto.ca/city-government/data-research-maps/research-reports/housing-and-homelessness-research-and-reports/</a>.
</div>
<div id="ref-janitor" class="csl-entry" role="doc-biblioentry">
Firke, Sam. 2020. <em><span class="nocase">janitor: Simple Tools for Examining and Cleaning Dirty Data</span></em>. <a href="https://CRAN.R-project.org/package=janitor">https://CRAN.R-project.org/package=janitor</a>.
</div>
<div id="ref-citeSharla" class="csl-entry" role="doc-biblioentry">
Gelfand, Sharla. 2020. <em><span class="nocase">opendatatoronto: Access the City of Toronto Open Data Portal</span></em>. <a href="https://CRAN.R-project.org/package=opendatatoronto">https://CRAN.R-project.org/package=opendatatoronto</a>.
</div>
<div id="ref-GrolemundWickham2011" class="csl-entry" role="doc-biblioentry">
Grolemund, Garrett, and Hadley Wickham. 2011. <span>“Dates and Times Made Easy with <span class="nocase">lubridate</span>.”</span> <em>Journal of Statistical Software</em> 40 (3): 1–25. <a href="http://www.jstatsoft.org/v40/i03/">http://www.jstatsoft.org/v40/i03/</a>.
</div>
<div id="ref-hao2019" class="csl-entry" role="doc-biblioentry">
Hao, Karen. 2019. <span>“<span class="nocase">This is how AI bias really happens—and why it’s so hard to fix</span>.”</span> <em>MIT Technology Review</em>, February. <a href="https://www.technologyreview.com/2019/02/04/137602/this-is-how-ai-bias-really-happensand-why-its-so-hard-to-fix/">https://www.technologyreview.com/2019/02/04/137602/this-is-how-ai-bias-really-happensand-why-its-so-hard-to-fix/</a>.
</div>
<div id="ref-citeR" class="csl-entry" role="doc-biblioentry">
R Core Team. 2022. <em>R: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>.
</div>
<div id="ref-unigme" class="csl-entry" role="doc-biblioentry">
UN IGME. 2021. <span>“Levels and Trends in Child Mortality, 2021.”</span> <a href="https://childmortality.org/wp-content/uploads/2021/12/UNICEF-2021-Child-Mortality-Report.pdf">https://childmortality.org/wp-content/uploads/2021/12/UNICEF-2021-Child-Mortality-Report.pdf</a>.
</div>
<div id="ref-citeggplot" class="csl-entry" role="doc-biblioentry">
Wickham, Hadley. 2016. <em><span class="nocase">ggplot2: Elegant Graphics for Data Analysis</span></em>. Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>.
</div>
<div id="ref-Wickham2017" class="csl-entry" role="doc-biblioentry">
———. 2017. <em><span class="nocase">tidyverse: Easily Install and Load the <span>“Tidyverse”</span></span></em>. <a href="https://CRAN.R-project.org/package=tidyverse">https://CRAN.R-project.org/package=tidyverse</a>.
</div>
<div id="ref-citestringr" class="csl-entry" role="doc-biblioentry">
———. 2019. <em><span class="nocase">stringr: Simple, Consistent Wrappers for Common String Operations</span></em>. <a href="https://CRAN.R-project.org/package=stringr">https://CRAN.R-project.org/package=stringr</a>.
</div>
<div id="ref-citetidyr" class="csl-entry" role="doc-biblioentry">
———. 2021. <em><span class="nocase">tidyr: Tidy Messy Data</span></em>. <a href="https://CRAN.R-project.org/package=tidyr">https://CRAN.R-project.org/package=tidyr</a>.
</div>
<div id="ref-tidyverse" class="csl-entry" role="doc-biblioentry">
Wickham, Hadley, Mara Averick, Jenny Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. <span>“Welcome to the <span class="nocase">tidyverse</span>.”</span> <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-citedplyr" class="csl-entry" role="doc-biblioentry">
Wickham, Hadley, Romain François, Lionel Henry, and Kirill Müller. 2022. <em><span class="nocase">dplyr: A Grammar of Data Manipulation</span></em>. <a href="https://CRAN.R-project.org/package=dplyr">https://CRAN.R-project.org/package=dplyr</a>.
</div>
<div id="ref-citereadr" class="csl-entry" role="doc-biblioentry">
Wickham, Hadley, Jim Hester, and Jenny Bryan. 2021. <em><span class="nocase">readr: Read Rectangular Text Data</span></em>. <a href="https://CRAN.R-project.org/package=readr">https://CRAN.R-project.org/package=readr</a>.
</div>
<div id="ref-citeknitr" class="csl-entry" role="doc-biblioentry">
Xie, Yihui. 2021. <em><span class="nocase">knitr: A General-Purpose Package for Dynamic Report Generation in R</span></em>. <a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a>.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./01-introduction.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Telling stories with data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./03-r_essentials.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">R essentials</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>